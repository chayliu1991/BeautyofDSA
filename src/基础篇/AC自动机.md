# AC自动机

很多支持用户发表文本内容的网站，比如 BBS，大都会有敏感词过滤功能，用来过滤掉用户输入的一些淫秽、反动、谩骂等内容。

对于访问量巨大的网站来说，比如淘宝，用户每天的评论数有几亿、甚至几十亿。对敏感词过滤系统的性能要求就要很高。那如何才能实现一个高性能的敏感词过滤系统呢？**AC自动机**这种多模式串匹配算法是这个系统的原型。

## 基于单模式串和Trie树实现的敏感词过滤

**单模式串匹配算法**是在一个模式串和一个主串之间进行匹配，也就是，在一个主串中查找一个模式串。 

常用的单模式串匹配算法：BF 算法、RK 算法、BM 算法、KMP 算法。

**多模式串匹配算法**就是在多个模式串和一个主串之间做匹配，也就是，在一个主串中查找多个模式串。

常用的多模式串匹配算法：Trie 树。

- 与单模式匹配算法相比，多模式匹配算法只需要扫描一遍主串，就能在主串中一次性查找多个模式串是否存在，从而大大提高匹配效率。

## AC自动机

AC 自动机算法，全称是 Aho-Corasick automaton 算法。基本可认为是 TrieTree + KMP。AC 自动机实际上就是在 Trie 树之上，加了类似 KMP 的 next 数组，只不过此处的 next 数组是构建在树上罢了。如果代码表示，就是下面这个样子：













